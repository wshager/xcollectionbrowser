//>>built
define("xstyle/core/elemental",["put-selector/put"],function(w){function r(a,b,c,l){function e(a){(!c||m.call(a.target,c))&&l(a)}x?a.addEventListener(b,e,!1):a.attachEvent(b,e)}function s(a){/e/.test(f.readyState||"")?setTimeout(a,200):f.addEventListener("DOMContentLoaded",a)}function t(a){for(var b=f.querySelectorAll(a.selector),c=a.name,l=0,e=b.length;l<e;l++){var h=b[l],g=h.elementalStyle;g||(g=h.elementalStyle={},h.elementalSpecificities={});var d=h.renderings;d||(d=h.renderings=[],n.push(h));
d.push({name:c,rendered:g[c]==a.propertyValue,renderer:a});g[c]=a.propertyValue}}function u(){for(var a=0;a<n.length;a++){var b=n[a],c=b.renderings,d=b.elementalStyle;delete b.renderings;for(var e=0;e<c.length;e++){var h=c[e],g=h.renderer,f=g.rendered;p=d[h.name]==g.propertyValue;if(!f&&p)try{g.render(b)}catch(k){w(b,"div.error",k.toString())}f&&(!p&&g.unrender)&&(g.unrender(b),c.splice(e--,1))}}n=[]}function v(a,b){for(var c=0,d=k.length;c<d;c++){var e=k[c];(!b||b==e.selector)&&(m?m.call(a,e.selector):
a.currentStyle[e.id])&&e.render(a)}}var f=document,y=1,x=!!f.addEventListener;r(f,"change",null,function(a){a=a.target;var b=a["-x-variable"];b&&b.put&&b.put(a.value)});var d=f.createElement("div"),z={"dom-qsa2.1":!!d.querySelectorAll},m=d.matches||d.matchesSelector||d.webkitMatchesSelector||d.mozMatchesSelector||d.msMatchesSelector||d.oMatchesSelector,k=[],n=[],q;s(function(){if(!q)if(q=!0,z["dom-qsa2.1"]){for(var a=0,b=k.length;a<b;a++)t(k[a]);u()}else for(var c=f.all,a=0,b=c.length;a<b;a++)v(c[a])});
var p;return{ready:s,on:r,addRenderer:function(a,b){var c={selector:a.selector,render:b};m||a.setStyle(c.id="x"+y++,"true");k.push(c);q&&t(c);u()},update:v,clearRenderers:function(){k=[]}}});
//# sourceMappingURL=elemental.js.map