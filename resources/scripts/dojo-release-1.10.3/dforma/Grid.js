//>>built
define("dforma/Grid","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-class dijit/_WidgetBase dijit/_Contained dijit/_Container dijit/_TemplatedMixin dijit/form/_FormValueMixin dijit/form/Button dstore/Memory dgrid/OnDemandGrid dgrid/Editor dgrid/Keyboard dgrid/Selection dgrid/extensions/DijitRegistry dforma/util/i18n".split(" "),function(d,f,v,w,e,g,h,k,l,m,c,n,p,q,r,s,t,u){return d("dforma.Grid",[g,h,k,l,m],{templateString:'\x3cdiv class\x3d"dijit dijitReset" data-dojo-attach-point\x3d"focusNode" aria-labelledby\x3d"${id}_label"\x3e\x3cdiv class\x3d"dijitReset dijitHidden dformaGridLabel" data-dojo-attach-point\x3d"labelNode" id\x3d"${id}_label"\x3e\x3c/div\x3e\x3cdiv class\x3d"dijitReset dijitHidden dformaGridHint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"dformaGridContainer" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"dijitReset dijitHidden dformaGridMessage" data-dojo-attach-point\x3d"messageNode"\x3e\x3c/div\x3e\x3c/div\x3e',
store:null,newdata:!1,defaultInstance:{},add:!0,edit:!0,remove:!0,readOnly:!1,baseClass:"dformaGrid",multiple:!0,_setHintAttr:function(a){this._set("hint",a);this.hintNode.innerHTML=a;e.toggle(this.hintNode,"dijitHidden",!this.hint)},_setLabelAttr:function(a){this._set("label",a);this.labelNode.innerHTML=a;e.toggle(this.labelNode,"dijitHidden",!this.label)},_getValueAttr:function(){this.grid.save();return this.store.fetchSync()},_setValueAttr:function(a){a=a||[];this.store.setData(a);this.grid.refresh()},
destroyRecursive:function(){this.inherited(arguments);this.addButton&&this.addButton.destroyRecursive();this.editButton&&this.editButton.destroyRecursive();this.removeButton&&this.removeButton.destroyRecursive()},postCreate:function(){var a=u.load("dforma","common"),b=this;this.store||(this.store=new n);this.grid=new (d([p,q,r,s,t],{collection:this.store,selectionMode:"single",showFooter:this.add||this.edit||this.remove}))(this.params);this.addChild(this.grid);this.add&&(this.addButton=(new c({label:a.buttonAdd,
disabled:this.readOnly,"class":"dformaGridAddButton",onClick:function(){b._add()}})).placeAt(this.grid.footerNode));this.edit&&(this.editButton=(new c({label:a.buttonEditSelected,disabled:!0,"class":"dformaGridEditButton",onClick:function(){b.editSelected()}})).placeAt(this.grid.footerNode));this.remove&&(this.removeButton=(new c({label:a.buttonRemoveSelected,disabled:!0,"class":"dformaGridRemoveButton",onClick:function(){b.removeSelected()}})).placeAt(this.grid.footerNode));this.inherited(arguments)},
startup:function(){this.inherited(arguments);var a=this,b=0;this.own(this.grid.on("dgrid-select",function(c){b+=c.rows.length;a.edit&&!a.readonly&&a.editButton.set("disabled",!b);a.remove&&a.removeButton.set("disabled",!b)}),this.grid.on("dgrid-deselect",function(c){b-=c.rows.length;a.edit&&!a.readonly&&a.editButton.set("disabled",!b);a.remove&&a.removeButton.set("disabled",!b)}))},onAdd:function(a){},_add:function(){this.onAdd(a);var a=this.store.add(f.clone(this.defaultInstance));this.newdata=!0;
this.grid.select(a);this.onEdit(a)},onEdit:function(a,b){},save:function(a,b){this.newdata=!1;this.store.put(a,b)},editSelected:function(){for(var a in this.grid.selection)if(this.grid.selection[a])this.onEdit(a,{overwrite:!0})},removeSelected:function(){for(var a in this.grid.selection)this.grid.selection[a]&&this.store.remove(a)}})});
//# sourceMappingURL=Grid.js.map